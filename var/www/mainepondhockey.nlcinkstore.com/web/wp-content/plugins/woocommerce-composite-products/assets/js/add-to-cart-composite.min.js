var wc_cp_composite_scripts={};jQuery(document).ready(function(a){function b(b){var c=b.find(".attribute-options"),d=c.length,e="";return 0==d?"":(c.each(function(b){var c=a(this).find("select").val();return""===c?(e="",!1):(e=e+a(this).data("attribute_label")+": "+a(this).find("select option:selected").text(),void(b!==d-1&&(e+=", ")))}),e)}function c(a,b){return a.hasClass("animating")?!1:(a.hasClass("closed")?(setTimeout(function(){b.slideDown({duration:200,queue:!1,always:function(){a.removeClass("animating")}})},10),a.removeClass("closed").addClass("open animating")):(b.slideUp({duration:200,queue:!1}),a.removeClass("open").addClass("closed")),!0)}function d(b,c){var d,e,f="undefined"==typeof c.partial?!0:c.partial,g="undefined"==typeof c.offset?50:c.offset,h="undefined"==typeof c.timeout?5:c.timeout,i="undefined"==typeof c.duration?250:c.duration,j="undefined"==typeof c.queue?!1:c.queue,k="undefined"==typeof c.always_on_complete?!1:c.always_on_complete,l="undefined"==typeof c.scroll_method?!1:c.scroll_method,m=!1,n=a(window),o=a(document);d="undefined"==typeof c.on_complete||c.on_complete===!1?function(){return!1}:c.on_complete;var p=function(){if("relative"===b)e=n.scrollTop()-g,m=!0;else if("absolute"===b)e=g,m=!0;else if(b.length>0&&!b.is_in_viewport(f)){var c=g;"bottom"===l||b.hasClass("scroll_bottom")?c=n.height()-b.outerHeight(!0)-g:"middle"===l&&(c=n.height()/3*2-b.outerHeight(!0)-g),e=b.offset().top-c,b.offset().top<e&&(e=b.offset().top),m=!0}if(m){e>o.height()-n.height()&&(e=o.height()-n.height()-100);var h=a("html").scrollTop(),p="body";a("html").scrollTop(a("html").scrollTop()-1),h!=a("html").scrollTop()&&(p="html"),a(p).animate({scrollTop:e},{duration:i,queue:j,always:d})}else k&&d()};h>0?setTimeout(function(){p()},h):p()}function e(a){var b=wc_composite_params.currency_format_decimal_sep,c=wc_composite_params.currency_position,d=wc_composite_params.currency_symbol,e=wc_composite_params.currency_format_trim_zeros,f=wc_composite_params.currency_format_num_decimals;if("yes"==e&&f>0){for(var g=0;f>g;g++)b+="0";a=a.replace(b,"")}var h="";return"left"==c?h='<span class="amount">'+d+a+"</span>":"right"==c?h='<span class="amount">'+a+d+"</span>":"left_space"==c?h='<span class="amount">'+d+" "+a+"</span>":"right_space"==c&&(h='<span class="amount">'+a+" "+d+"</span>"),h}function f(a){var b=wc_composite_params.currency_format_num_decimals,c=wc_composite_params.currency_format_decimal_sep,d=wc_composite_params.currency_format_thousand_sep,e=a,f=isNaN(b=Math.abs(b))?2:b,g="undefined"==typeof c?",":c,h="undefined"==typeof d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f))+"",k=(k=j.length)>3?k%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")}function g(a,b){var c=0,d=0,e=[];for(a.sort(),b.sort();c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}function h(a){window.console&&window.console.log(a)}function i(a){var b="",c=a.length;if(c>0)for(var d=0,e=0;c>e;e++)d++,b=1==c||1==d?a[e]:wc_composite_params.i18n_comma_sep.replace("%s",b).replace("%v",a[e]);return b}function j(b,e,f){var g=e.data("item_id");this.step_id=g,this.step_index=f,this.step_title=e.data("nav_title"),this._validation_messages=[],this._is_component=e.hasClass("component"),this._is_review=e.hasClass("cart"),this.on_step_active=[],this.$self=e,this.view_elements={$summary_element:b.$composite_summary.find(".summary_element_"+g),$summary_element_link:b.$composite_summary.find(".summary_element_"+g+" .summary_element_link"),$summary_element_wrapper:b.$composite_summary.find(".summary_element_"+g+" .summary_element_wrapper"),$summary_element_inner:b.$composite_summary.find(".summary_element_"+g+" .summary_element_wrapper_inner"),$summary_element_title:b.$composite_summary.find(".summary_element_"+g+" .summary_element_selection"),$summary_element_image:b.$composite_summary.find(".summary_element_"+g+" .summary_element_image"),$summary_element_price:b.$composite_summary.find(".summary_element_"+g+" .summary_element_price"),$pagination_element:b.$composite_pagination.find(".pagination_element_"+g),$pagination_element_link:b.$composite_pagination.find(".pagination_element_"+g+" .element_link")},this.get_title=function(){return this.step_title},this.get_element=function(){return this.$self},this.is_review=function(){return this._is_review},this.is_component=function(){return this._is_component},this.get_component=function(){return this._is_component?b.composite_components[this.step_index]:!1},this.is_current=function(){return this.$self.hasClass("active")},this.is_next=function(){return this.$self.hasClass("next")},this.is_previous=function(){return this.$self.hasClass("prev")},this.show_step=function(){var a=this,c=b.$composite_form,e=b.composite_layout,f=b.composite_layout_variation,g=this.$self,h=b.composite_initialized===!1?!1:!0,i=a.is_review(),j=a.is_component(),k=j?a.get_component():!1;if("single"===e&&h)return d(g,{partial:!1,duration:250,queue:!1}),!1;if("paged"===e&&h&&(j&&k.$component_content.hasClass("relocated")?"yes"===wc_composite_params.relocated_content_reset_on_return?a.on_step_active.push(k.reset_relocated_content):d(k.$component_content,{timeout:300,partial:!1,duration:250,queue:!1,scroll_method:"middle"}):d(c.find(".scroll_show_component"),{timeout:20,partial:!0,duration:250,queue:!1}),setTimeout(function(){b.$composite_summary_widget.length>0&&(i?b.$composite_summary_widget.animate({opacity:0},{duration:250,queue:!1}):(b.$composite_summary_widget.slideDown(250),b.$composite_summary_widget.animate({opacity:1},{duration:250,queue:!1}))),i&&b.$composite_summary_widget.slideUp(250)},20),"componentized"===f&&(i?b.$composite_navigation.css({visibility:"hidden"}):b.$composite_navigation.css({visibility:"visible"}))),a.set_active(),a.update_block_state(),a.fire_scenario_actions(),"yes"===wc_composite_params.no_compat_options_autoload&&"single"!==e&&"thumbnails"===b.composite_selection_mode&&j&&k.append_results()&&k.hide_disabled_products()){var l=k.$component_pagination.find(".component_options_load_more"),m=l.data("results_per_page");(!1===k.has_compat_results||k.compat_results_count<m)&&setTimeout(function(){l.trigger("click")},300)}b.update_ui(!0),"progressive"===e&&h&&g.hasClass("autoscrolled")&&d(g,{timeout:250,partial:!1,duration:250,queue:!1}),g.trigger("wc-composite-show-component",[a,b])},this.set_active=function(){var c=this,d=b.$composite_form,e=b.composite_layout,f=b.composite_layout_variation,g=b.get_current_step(),h=!1;g.step_id==c.step_id&&(h=!0),b.last_active_step_index=g.step_index,d.children(".multistep.active, .multistep.next, .multistep.prev").removeClass("active next prev"),this.get_element().addClass("active");var i=this.get_element().next(),j=this.get_element().prev();"paged"===e&&"componentized"===f&&(i=d.find(".multistep.cart"),j=d.find(".multistep.cart")),i.hasClass("multistep")&&i.addClass("next"),j.hasClass("multistep")&&j.addClass("prev"),"progressive"!==e&&(h?c.get_element().show():(b.has_transition_lock=!0,"slide"===wc_composite_params.transition_type?setTimeout(function(){var d=g.get_element().height(),e=c.get_element().height(),f=Math.max(d,e);b.current_transition_delay=150+Math.min(450,parseInt(f/5)),g.get_element().addClass("faded").slideUp({duration:b.current_transition_delay,always:function(){g.get_element().removeClass("faded")}}),g.step_index<c.step_index&&(c.get_element().after('<div style="display:none" class="active_placeholder"></div>'),c.get_element().insertBefore(g.get_element())),a.each(c.on_step_active,function(a,b){b()}),c.on_step_active=[],c.get_element().slideDown({duration:b.current_transition_delay,always:function(){g.step_index<c.step_index&&b.$composite_form.find(".active_placeholder").replaceWith(c.get_element()),b.$composite_form.find(".composite_navigation.cloned").remove(),b.has_transition_lock=!1}})},200):"fade"===wc_composite_params.transition_type&&(b.$steps.addClass("faded"),b.$composite_navigation.addClass("faded"),setTimeout(function(){g.get_element().hide(),a.each(c.on_step_active,function(a,b){b()}),c.on_step_active=[],c.get_element().show(),setTimeout(function(){b.$steps.removeClass("faded"),b.$composite_navigation.removeClass("faded")},50),b.has_transition_lock=!1},250)))),this.$self.trigger("wc-composite-set-active-component",[c,b])},this.update_block_state=function(){var a=b.composite_layout;if("progressive"!==a)return!1;var c=b.get_previous_step();if(c!==!1&&(c.block_step_inputs(),c.$self.hasClass("block-open")?c.$self.find(".component_title").addClass("inactive"):c.toggle_step("closed",!0)),this.unblock_step_inputs(),this.unblock_step(),c!==!1){var d=c.get_element().find(".clear_component_options");d.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")}},this.unblock_step=function(){this.toggle_step("open",!0),this.$self.removeClass("blocked")},this.block_next_steps=function(){var c=this.step_index;a.each(b.composite_steps,function(a,b){a>c&&(b.get_element().hasClass("disabled")&&b.unblock_step_inputs(),b.block_step())})},this.block_step=function(){this.$self.addClass("blocked"),this.toggle_step("closed",!1)},this.toggle_step=function(a,b){this.$self.hasClass("toggled")&&("open"===a?this.$self.hasClass("closed")&&c(this.$self,this.$self.find(".component_inner")):"closed"===a&&this.$self.hasClass("open")&&c(this.$self,this.$self.find(".component_inner")),b?this.$self.find(".component_title").removeClass("inactive"):this.$self.find(".component_title").addClass("inactive"))},this.unblock_step_inputs=function(){this.$self.find("select.disabled_input, input.disabled_input").removeClass("disabled_input").prop("disabled",!1),this.$self.removeClass("disabled").trigger("wc-composite-enable-component-options",[this,b]);var a=this.$self.find(".clear_component_options");a.html(wc_composite_params.i18n_clear_selection).removeClass("reset_component_options")},this.block_step_inputs=function(){this.$self.find("select, input").addClass("disabled_input").prop("disabled","disabled"),this.$self.addClass("disabled").trigger("wc-composite-disable-component-options",[this,b]);var a=this.$self.find(".clear_component_options");a.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")},this.is_blocked=function(){return this.$self.hasClass("blocked")},this.has_blocked_inputs=function(){return this.$self.hasClass("disabled")},this.fire_scenario_actions=function(a){return b.has_scenarios_update_lock?!1:("undefined"==typeof a&&(a=!1),b.actions_nesting++,b.update_active_scenarios(this.step_id),b.update_selections(this.step_id,a),1===b.actions_nesting&&this.get_element().trigger("wc-composite-fire-scenario-actions",[this,b]),void b.actions_nesting--)},this.add_validation_message=function(a){this._validation_messages.push(a.toString())},this.get_validation_messages=function(){return this._validation_messages},this.validate=function(){var c=this;if(this._validation_messages=[],this.is_component()){var d=this.get_component(),e=d.get_selected_product_id(),f=d.get_selected_product_type(),g=!1;if(e>0?"variable"===f&&d.$component_summary.find(".variations_button input.variation_id").val()>0?g=!0:"simple"===f||"none"===f?g=!0:1==d.$component_data.data("component_set")&&(g=!0):""===e&&d.is_optional()&&(g=!0),!g)if(e>0)if("bundle"===f){var h=wc_pb_bundle_scripts[e],i=h.get_validation_messages();a.each(i,function(a,d){c.add_validation_message(d),b.add_validation_message(c.get_title(),d)})}else this.add_validation_message(wc_composite_params.i18n_select_product_options.replace("%s",this.get_title())),b.add_validation_message(this.get_title(),wc_composite_params.i18n_select_product_options_for);else this.add_validation_message(wc_composite_params.i18n_select_component_option.replace("%s",this.get_title())),b.add_validation_message(this.get_title(),wc_composite_params.i18n_select_component_option_for);!d.is_in_stock()&&this.$self.find(".component_wrap input.qty").val()>0&&this.add_validation_message(wc_composite_params.i18n_selected_component_options_no_stock.replace("%s",this.get_title()))}this.$self.triggerHandler("wc-composite-validate-step",[this,b])},this.passes_validation=function(){return this._validation_messages.length>0?!1:!0}}function k(b,c,e){var f=this;this.component_index=e,this.component_id=c.attr("data-item_id"),this.component_title=c.data("nav_title"),this._is_optional=!1,this._is_configured=!1,this.has_compat_results=!0,this.compat_results_count=0,this._hide_disabled_products=c.hasClass("hide-incompatible-products"),this._hide_disabled_variations=c.hasClass("hide-incompatible-variations"),this._append_results=c.hasClass("append-results"),this._selection_id=!1,this._selection_invalid=!1,this.initial_selection_id=c.find("select.component_options_select").val(),this.$self=c,this.$component_summary=c.find(".component_summary"),this.$component_selections=c.find(".component_selections"),this.$component_content=c.find(".component_content"),this.$component_options=c.find(".component_options"),this.$component_options_inner=c.find(".component_options_inner"),this.$component_inner=c.find(".component_inner"),this.$component_pagination=c.find(".component_pagination"),this.$component_message=c.find(".component_message"),this.$component_message_content=c.find(".component_message ul.msg"),this.$component_data=a(),this.$relocation_origin=!1,this.append_results=function(){return this._append_results},this.set_selection_id=function(a){this._selection_id=a},this.get_selection_id=function(){return this._selection_id},this.set_selection_invalid=function(a){this._selection_invalid=a},this.hide_disabled_products=function(){return this._hide_disabled_products},this.hide_disabled_variations=function(){return this._hide_disabled_variations},this.get_selected_product_type=function(){return this.$component_data.data("product_type")},this.get_selected_product_id=function(){return this._selection_invalid?null:this.$component_options.find("#component_options_"+this.component_id).val()},this.is_in_stock=function(){return this.$component_summary.find(".component_wrap .out-of-stock").not(".inactive").length>0?!1:!0},this.is_configured=function(){return this._is_configured},this.set_configured=function(a){this._is_configured=a},this.init_scripts=function(a){if("undefined"==typeof a&&(a=!0),this.$component_data=this.$self.find(".component_data"),a){var b=this.get_selected_product_type(),c=this.$self.find(".component_summary > .content");"variable"===b?(c.hasClass("cart")||c.addClass("cart"),c.hasClass("variations_form")||c.addClass("variations_form"),c.data("product_variations",this.$component_data.data("product_variations")),c.wc_variation_form(),c.find(".variations select").change(),c.find("div").stop(!0,!0)):"bundle"===b?(c.hasClass("bundle_form")||c.addClass("bundle_form"),c.find(".bundle_data").wc_pb_bundle_form(),c.find("div").stop(!0,!0)):c.hasClass("cart")||c.addClass("cart")}},this.get_step=function(){return b.get_step(this.component_id)},this.get_title=function(){return this.component_title},this.update_filters_ui=function(){var b=this.$self.find(".component_filters"),c=b.find(".component_filter"),d=!0;return 0==c.length?!1:(c.each(function(){0==a(this).find(".component_filter_option.selected").length?a(this).removeClass("active"):(a(this).addClass("active"),d=!1)}),void(d?b.removeClass("filtered"):b.addClass("filtered")))},this.get_active_filters=function(){var b=this.$self.find(".component_filters"),c={};return 0==b.length?c:(b.find(".component_filter_option.selected").each(function(){var b=a(this).closest(".component_filter").data("filter_type"),d=a(this).closest(".component_filter").data("filter_id"),e=a(this).data("option_id");b in c?d in c[b]?c[b][d].push(e):(c[b][d]=[],c[b][d].push(e)):(c[b]={},c[b][d]=[],c[b][d].push(e))}),c)},this.append_component_options=function(a){this.reload_component_options(a,!0)},this.reload_component_options=function(c,d){var e=this,f=this.$self,g=this.$component_selections,i=this.$component_options,j=this.$component_options_inner,k=this.$component_pagination,m=i.outerHeight(),n=0,o=!1,p=!1,q=250,r="yes"===wc_composite_params.use_wc_ajax?b.ajax_url.toString().replace("%%endpoint%%","woocommerce_show_component_options"):b.ajax_url;if(f.hasClass("disabled"))return!1;"undefined"==typeof d&&(d=!1);var s=function(){var a={};if(e.append_results()&&(a=g.find(".appended"),a.removeClass("appended")),o)d||g.removeClass("refresh_component_options blocked_content"),i.animate({height:n},{duration:250,queue:!1,always:function(){i.css({height:"auto"}),g.unblock(),g.removeClass("refresh_component_options blocked_content")}});else{var b=5;d&&a.length>0&&(b=250),setTimeout(function(){g.unblock().removeClass("blocked_content refresh_component_options")},b)}};g.addClass("blocked_content").block(l),b.append_results_nesting>0&&(q=5),setTimeout(function(){a.post(r,c,function(l){d||g.addClass("refresh_component_options"),setTimeout(function(){try{if(i.css("height",m),"success"===l.result){var g=i.find("select.component_options_select"),q=g.val(),r=a(l.options_markup),t=j.find(".component_option_thumbnails_container"),u=r.find(".component_option_thumbnail_container");if(e.append_results()&&(u.addClass("new"),u.find(".component_option_thumbnail").addClass("appended")),d){"undefined"!=typeof g.data("select_options")&&g.data("select_options")!==!1&&(g.find("option:gt(0)").remove(),g.append(g.data("select_options")),g.find("option:gt(0)").removeClass("disabled"),g.find("option:gt(0)").removeAttr("disabled"));var v=r.find("select.component_options_select option"),w=g.find('option[value="'+e.initial_selection_id+'"]');v=v.filter(":gt(0)"),e.initial_selection_id>0&&0==t.find("#component_option_thumbnail_"+e.initial_selection_id).length?(w.remove(),q>0&&t.find("#component_option_thumbnail_"+q).length>0&&(v=v.not(":selected"))):v=v.not(":selected"),v.appendTo(g),u.appendTo(t)}else j.html(a(r).find(".component_options_inner").html()),e.initial_selection_id=g.val();var x=j.find(".component_option_thumbnail_container:not(.hidden) img"),y=function(){if(x.length>0&&t.is(":visible")){var b=!1;x.each(function(){var c=a(this);return 0===c.height()?(b=!0,!1):void 0}),b?setTimeout(function(){y()},100):z()}else z()},z=function(){var h,r=0,u=0,v=0,w=0;l.pagination_markup?(k.html(a(l.pagination_markup).html()),e.append_results()&&(h=k.find(".component_options_load_more"),v=h.data("pages_loaded"),w=h.data("pages"),u=h.data("results_per_page"),r=w-v),k.slideDown(200)):(e.append_results()&&(h=k.find(".component_options_load_more"),u=h.data("results_per_page"),h.data("pages_loaded",h.data("pages"))),k.slideUp(200)),g.data("select_options",!1);var x=b.$composite_data.data("scenario_data");d?a.each(l.component_scenario_data,function(a,b){x.scenario_data[c.component_id][a]=b}):x.scenario_data[c.component_id]=l.component_scenario_data;var y=q;if(q=g.val(),y>0&&(""===q||"undefined"==typeof q))g.change();else{if(e.get_step().fire_scenario_actions(),e.append_results()&&e.hide_disabled_products()){var z=t.find(".component_option_thumbnail_container.new"),A=z.not(".hidden");z.removeClass("new"),b.append_results_nesting_count+=A.length,b.append_results_nesting_count<u&&r>0&&(b.append_results_nesting++,p=!0,b.append_results_nesting>10&&(window.confirm(wc_composite_params.i18n_reload_threshold_exceeded.replace("%s",e.get_title()))?b.append_results_nesting=0:p=!1))}p||(b.append_results_nesting_count=0,b.append_results_nesting=0,b.update_ui())}p?(c.load_page++,e.append_component_options(c)):(f.trigger("wc-composite-component-options-loaded",[e,b]),n=j.outerHeight(!0),Math.abs(n-m)>1?o=!0:i.css("height","auto"),s())};p||y()}else j.html(l.options_markup),n=j.outerHeight(!0),Math.abs(n-m)>1?o=!0:i.css("height","auto"),s()}catch(A){h(A),b.append_results_nesting_count=0,b.append_results_nesting=0,s()}},q)},"json")},q)},this.updated_selection=function(a){var c=this,d=c.get_step();c.set_selection_id(a),a?(c.init_qty_input(),c.init_scripts()):c.init_scripts(!1),d.fire_scenario_actions(),b.update_ui(),b.update_composite()},this.reset_relocated_content=function(){var a=f;a.$component_content.hasClass("relocated")&&(a.$relocation_origin.after(a.$component_content),a.$relocation_origin.remove(),a.$relocation_origin=!1,a.$component_options.find(".component_option_content_container").remove(),a.get_selected_product_id()>0?d(b.$composite_form.find(".scroll_show_component"),{partial:!1,duration:250,queue:!1}):d(a.$component_selections,{partial:!1,duration:250,queue:!1}),a.$component_content.removeClass("relocated"))},this.get_content_relocation_params=function(){var a=this,b=!1,c=!1,d=a.$component_options.find(".component_option_thumbnail.selected").closest(".component_option_thumbnail_container"),e=d.outerWidth(!0)/a.$component_options.outerWidth(),f=d.hasClass("last")||e>.6?d:d.nextAll(".last").first();return c=f.length>0?f:a.$component_options.find(".component_option_thumbnail_container").last(),0===c.next(".component_option_content_container").length&&(b=!0),{reference:c,relocate:b}},this.select_component_option=function(c){var e=this,f=e.$component_selections,g=e.$component_content,i=e.$component_summary,j=e.$self.find(".component_summary > .content"),k=b.composite_layout,m=g,n="middle",o=i.outerHeight(!0),p=0,q=!1,r=!1,s=!1,t=g.hasClass("relocated"),u=!1,v=!1,w="yes"===wc_composite_params.use_wc_ajax?b.ajax_url.toString().replace("%%endpoint%%","woocommerce_show_composited_product"):b.ajax_url,x=function(b){s?(t=!0,g.addClass("relocated"),g.addClass("relocating"),v=a('<li class="component_option_content_container">'),u.after(v),g.animate({height:0},{duration:200,queue:!1,always:function(){y(b)}}),g.offset().top<v.offset().top&&d("relative",{offset:o,timeout:0,duration:200,queue:!1}),o=0):(g.css("height",o),y(b))},y=function(a){j.html(a.markup),s&&(g.appendTo(v),e.$component_options.find(".component_option_content_container").not(v).remove()),"success"===a.result?(e.updated_selection(c.product_id),e.$self.trigger("wc-composite-component-loaded",[e,b])):e.updated_selection(!1);var d="bundle"===e.get_selected_product_type()?300:250;setTimeout(function(){A()},d)},z=function(){j.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),e.$self.find(".composite_navigation.movable").length>0&&b.$composite_navigation_movable.addClass("hidden"),e.reset_relocated_content(),e.updated_selection(!1)},A=function(){p=i.outerHeight(!0),s||Math.abs(p-o)>1?q=!0:g.css("height","auto"),t&&g.removeClass("relocating"),q?g.animate({height:p},{duration:200,queue:!1,always:function(){d(m,{offset:50,partial:!1,scroll_method:n,duration:200,queue:!1,always_on_complete:!0,on_complete:function(){g.css({height:"auto"}),f.unblock().removeClass("blocked_content"),b.has_transition_lock=!1}})}}):d(m,{offset:50,partial:!1,scroll_method:n,duration:200,queue:!1,always_on_complete:!0,on_complete:function(){f.unblock().removeClass("blocked_content"),b.has_transition_lock=!1}})};if("paged"===k&&e.append_results()&&e.$self.hasClass("options-style-thumbnails")&&(r=!0),r&&!1===e.$relocation_origin&&(e.$relocation_origin=a('<div class="component_content_origin">'),g.before(e.$relocation_origin)),r&&(t||!g.is_in_viewport(!1))){var B=e.get_content_relocation_params();u=B.reference,s=B.relocate}if(""!==c.product_id)f.addClass("blocked_content").block(l),b.has_transition_lock=!0,a.post(w,c,function(a){try{x(a)}catch(b){h(b),z(),A()}},"json");else{var C=!0;if(e.$self.hasClass("resetting")&&(C=!1),C){e.$component_data.data("product_type","none");var D=b.$composite_navigation_movable.is(":visible")?b.$composite_navigation_movable.outerHeight(!0):0,E=t?0:i.outerHeight(!0)-j.innerHeight()-D;g.animate({height:E},{duration:200,queue:!1,always:function(){z(),g.css({height:"auto"})}})}else z()}},this.is_optional=function(){return this._is_optional},this.set_optional=function(a){a&&!this._is_optional?this.$component_selections.find("option.none").html(wc_composite_params.i18n_none):!a&&this._is_optional&&this.$component_selections.find("option.none").html(wc_composite_params.i18n_select_an_option),this._is_optional=a},this.init_qty_input=function(){("no"===wc_composite_params.is_wc_version_gte_2_3||"yes"===wc_composite_params.show_quantity_buttons)&&this.$self.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />'),this.$self.find(".component_wrap input.qty").each(function(){var b=parseFloat(a(this).attr("min"));b>=0&&parseFloat(a(this).val())<b&&a(this).val(b)})}}a("body").on("quick-view-displayed",function(){a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})}),a(window).resize(function(){a.each(wc_cp_composite_scripts,function(a,b){clearTimeout(b.on_resize_timer),b.on_resize_timer=setTimeout(function(){b.on_resize_handler()},50)})});var l={};l="yes"===wc_composite_params.is_wc_version_gte_2_3?{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 )",opacity:.6}}:{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 ) url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}},a.fn.wc_composite_form=function(){if(!a(this).hasClass("composite_data"))return!0;var l=a(this),m=a(this).data("container_id");if("undefined"!=typeof wc_cp_composite_scripts[m])return!0;var n=l.closest(".composite_form"),o=l.data("composite_settings");wc_cp_composite_scripts[m]={$composite_data:l,$composite_form:n,$composite_add_to_cart_button:n.find(".composite_add_to_cart_button"),$composite_navigation:n.find(".composite_navigation"),$composite_navigation_top:n.find(".composite_navigation.top"),$composite_navigation_bottom:n.find(".composite_navigation.bottom"),$composite_navigation_movable:n.find(".composite_navigation.movable"),$composite_pagination:n.find(".composite_pagination"),$composite_summary:n.find(".composite_summary"),$composite_summary_widget:a(".widget_composite_summary"),$components:n.find(".component"),$steps:{},$composite_price:l.find(".composite_price"),$composite_message:l.find(".composite_message"),$composite_message_content:l.find(".composite_message ul.msg"),$composite_button:l.find(".composite_button"),$composite_stock_status:!1,on_resize_timer:!1,ajax_url:"",composite_id:m,composite_settings:l.data("composite_settings"),composite_layout:o.layout,composite_layout_variation:o.layout_variation,composite_selection_mode:o.selection_mode,composite_button_behaviour:o.button_behaviour,composite_sequential_comp_progress:o.sequential_componentized_progress,actions_nesting:0,last_active_step_index:0,append_results_nesting:0,append_results_nesting_count:0,composite_components:{},composite_steps:{},composite_initialized:!1,has_update_lock:!1,has_ui_update_lock:!1,has_transition_lock:!1,has_update_nav_delay:!1,has_scenarios_update_lock:!1,current_transition_delay:200,active_scenarios:{},composite_summary_widget:{},_validation_messages:[],init:function(){this.bind_event_handlers(),this.init_components(),this.init_steps(),this.init_widget();var b=this,c=b.$composite_data;"yes"===wc_composite_params.use_wc_ajax?b.ajax_url=woocommerce_params.wc_ajax_url:b.ajax_url=woocommerce_params.ajax_url,"undefined"==typeof b.composite_sequential_comp_progress&&(b.composite_sequential_comp_progress="yes"),b.on_resize_handler(),c.find(".composite_wrap p.stock").length>0&&(b.$composite_stock_status=c.find(".composite_wrap p.stock").clone()),0==b.$composite_message_content.length&&(b.$composite_message.length>0&&b.$composite_message.remove(),b.$composite_price.after('<div class="composite_message" style="display:none"><ul class="msg woocommerce-error"></ul></div>'),b.$composite_message=c.find(".composite_message"),b.$composite_message_content=b.$composite_message.find("ul.msg")),"paged"===b.composite_layout&&b.$composite_message_content.removeClass("woocommerce-error").addClass("woocommerce-info");var d=c.find("#product-addons-total");b.$composite_price.after(d),c.find(".nyp").trigger("woocommerce-nyp-updated-item"),"progressive"!==b.composite_layout||b.$composite_data.hasClass("composite_added_to_cart")||b.$composite_form.find(".toggled:not(.active) .component_title").addClass("inactive"),c.trigger("wc-composite-initializing",[b]),b.has_scenarios_update_lock=!0,a.each(b.composite_components,function(a,c){var d=c.$component_options.find("select.component_options_select");c.set_selection_id(d.val()),c.init_scripts(),c.$self.trigger("wc-composite-component-loaded",[c,b])}),b.has_scenarios_update_lock=!1,b.$composite_form.find(".cp-no-js-msg").remove();var e=b.get_current_step();b.last_active_step_index=e.step_index,"paged"===b.composite_layout||"progressive"===b.composite_layout?e.show_step():(e.set_active(),e.fire_scenario_actions(),b.update_ui()),b.composite_initialized=!0,b.update_composite(),a.each(b.composite_components,function(a,c){c.$self.trigger("wc-composite-component-options-loaded",[c,b])}),c.trigger("wc-composite-initialized",[b])},bind_event_handlers:function(){var b=this;this.$composite_add_to_cart_button.on("click",function(){a.each(b.composite_components,function(b,c){c.$self.find("select, input").each(function(){a(this).prop("disabled",!1)})})}),this.$composite_data.on("woocommerce-nyp-updated-item",function(){var c=a(this).find(".nyp");if(c.length>0){var d=a(this).data("price_data");d.base_price=c.data("price"),b.update_composite()}}),this.$composite_navigation.on("click",".page_button",function(){return a(this).hasClass("inactive")?!1:b.has_transition_lock?!1:(a(this).hasClass("next")?b.get_next_step()?b.show_next_step():d(b.$composite_form.find(".scroll_final_step"),{partial:!1,duration:250,queue:!1}):b.show_previous_step(),a(this).blur(),!1)}),this.$composite_pagination.on("click",".pagination_element a",function(){if(b.has_transition_lock)return!1;if(a(this).hasClass("inactive"))return!1;var c=a(this).closest(".pagination_element").data("item_id");return b.show_step(c),a(this).blur(),!1}),this.$composite_summary.on("click",".summary_element_link",function(){if(b.has_transition_lock)return!1;var c=b.$composite_form;if(a(this).hasClass("disabled"))return!1;var d=a(this).closest(".summary_element").data("item_id");if("undefined"==typeof d){var e=b.$composite_summary,f=e.find(".summary_element").index(a(this).closest(".summary_element"));d=c.find(".multistep.component:eq("+f+")").data("item_id")}var g=b.get_step(d);return g===!1?!1:(g.get_element().hasClass("progressive")&&g.block_next_steps(),g.is_current()&&"single"!==b.composite_layout||g.show_step(),!1)}).on("click","a.summary_element_tap",function(){return a(this).closest(".summary_element_link").trigger("click"),!1})},init_components:function(){var b=this;b.$components.each(function(c){b.composite_components[c]=new k(b,a(this),c),b.bind_component_event_handlers(b.composite_components[c])})},bind_component_event_handlers:function(b){var d=this;b.$self.on("wc-composite-component-loaded",function(){a.isFunction(a.fn.prettyPhoto)&&a(this).find('a[data-rel^="prettyPhoto"]').prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}).on("woocommerce-product-addons-update",function(){var b=a(this).find(".addon");return 0==b.length?!1:void d.update_composite()}).on("woocommerce-nyp-updated-item",function(){var c=a(this).find(".cart .nyp");c.length>0&&"variable"!==b.get_selected_product_type()&&(b.$component_data.data("price",c.data("price")),b.$component_data.data("regular_price",c.data("price")),d.update_composite())}).on("woocommerce_variation_select_change",function(c){var e=b.$component_summary;b.$component_data.data("component_set",!1),e.find(".composited_product_images").addClass("images"),a(this).find(".variations .attribute-options select").each(function(){if(""===a(this).val()){e.find(".component_wrap .single_variation input.variation_id").val(""),e.find(".component_wrap .stock").addClass("inactive");
var c=b.get_step();return c.fire_scenario_actions(),d.update_ui(),d.update_composite(),!1}})}).on("woocommerce_variation_select_focusin",function(a){b.get_step().fire_scenario_actions(!0)}).on("reset_image",function(a){var c=b.$component_summary;c.find(".composited_product_images").removeClass("images")}).on("found_variation",function(c,e){var f=b.$component_summary,g=d.$composite_data.data("price_data");"yes"===g.per_product_pricing&&(b.$component_data.data("price",e.price),b.$component_data.data("regular_price",e.regular_price)),b.$component_data.data("component_set",!0),f.find(".composited_product_images").removeClass("images"),"yes"===e.is_sold_individually&&a(this).find(".component_wrap input.qty").val("1").change(),b.get_step().fire_scenario_actions(),d.update_ui(),d.update_composite()}).on("woocommerce-composited-product-update",function(a){var c=d.$composite_data.data("price_data");if("yes"===c.per_product_pricing){var e=b.$component_data.data("price"),f=b.$component_data.data("regular_price");b.$component_data.data("price",e),b.$component_data.data("regular_price",f)}d.update_ui(),d.update_composite()}).on("click",".clear_component_options",function(c){if(a(this).hasClass("reset_component_options"))return!1;var d=b.$component_options.find("select.component_options_select");return b.get_step().unblock_step_inputs(),b.$self.find(".component_option_thumbnails .selected").removeClass("selected"),d.val("").change(),!1}).on("click",".reset_component_options",function(a){var c=b.get_step(),d=b.$component_options.find("select.component_options_select");return c.unblock_step_inputs(),b.$self.find(".component_option_thumbnails .selected").removeClass("selected"),c.set_active(),d.val("").change(),c.block_next_steps(),!1}).on("click",".block_component_selections_inner",function(a){var c=b.get_step();return c.block_next_steps(),c.show_step(),!1}).on("click",".component_option_thumbnail",function(c){var d=b.$self;if(d.hasClass("disabled")||a(this).hasClass("disabled"))return!0;if(a(this).blur(),!a(this).hasClass("selected")){var e=a(this).data("val");b.$component_options.find("select.component_options_select").val(e).change()}}).on("click","a.component_option_thumbnail_tap",function(b){return a(this).closest(".component_option_thumbnail").trigger("click"),!1}).on("focusin touchstart",".component_options select.component_options_select",function(a){b.get_step().fire_scenario_actions(!0)}).on("change",".component_options select.component_options_select",function(c){var e=b.$self.find(".component_summary > .content"),f=a(this).val();if(b.get_selection_id()===f)return!1;a(this).blur(),b.$component_options.find(".component_option_thumbnails .selected").removeClass("selected disabled"),b.$component_options.find("#component_option_thumbnail_"+a(this).val()).addClass("selected");var g={action:"woocommerce_show_composited_product",product_id:f,component_id:b.component_id,composite_id:d.composite_id,security:wc_composite_params.show_product_nonce};return e.removeClass("variations_form bundle_form cart"),e.off().find("*").off(),b.select_component_option(g),!1}).on("click",".component_pagination a.component_options_load_more",function(c){var e=b.$self,f=b.component_id,g=e.find(".component_ordering select"),h=parseInt(a(this).data("pages_loaded"))+1,i=parseInt(a(this).data("pages")),j=b.get_selected_product_id(),k=d.composite_id,l=b.get_active_filters();if(h>i)return!1;var m={action:"woocommerce_show_component_options",load_page:h,component_id:f,composite_id:k,selected_option:j,filters:l,security:wc_composite_params.show_product_nonce};return g.length>0&&(m.orderby=g.val()),m.load_page>0&&(a(this).blur(),b.append_component_options(m)),!1}).on("click",".component_pagination a.component_pagination_element",function(c){var e=b.$self,f=b.component_id,g=e.find(".component_ordering select"),h=parseInt(a(this).data("page_num")),i=b.get_selected_product_id(),j=d.composite_id,k=b.get_active_filters(),l={action:"woocommerce_show_component_options",load_page:h,component_id:f,composite_id:j,selected_option:i,filters:k,security:wc_composite_params.show_product_nonce};return g.length>0&&(l.orderby=g.val()),l.load_page>0&&(a(this).blur(),b.reload_component_options(l)),!1}).on("change",".component_ordering select",function(c){var e=b.component_id,f=b.get_selected_product_id(),g=d.composite_id,h=a(this).val(),i=b.get_active_filters(),j={action:"woocommerce_show_component_options",load_page:1,component_id:e,composite_id:g,selected_option:f,orderby:h,filters:i,security:wc_composite_params.show_product_nonce};return a(this).blur(),b.reload_component_options(j),!1}).on("click",".component_filter_option a",function(c){var e=b.$self,f=b.component_id,g=e.find(".component_ordering select"),h=a(this).closest(".component_filter_option"),i=b.get_selected_product_id()>0?b.get_selected_product_id():"",j=d.composite_id,k={};h.hasClass("selected")?h.removeClass("selected"):h.addClass("selected"),b.update_filters_ui(),k=b.get_active_filters();var l={action:"woocommerce_show_component_options",load_page:1,component_id:f,composite_id:j,selected_option:i,filters:k,security:wc_composite_params.show_product_nonce};return g.length>0&&(l.orderby=g.val()),a(this).blur(),b.reload_component_options(l),!1}).on("click",".component_filters a.reset_component_filters",function(c){var e=b.$self,f=b.component_id,g=e.find(".component_ordering select"),h=e.find(".component_filters .component_filter_option.selected");if(0==h.length)return!1;var i=b.get_selected_product_id()>0?b.get_selected_product_id():"",j=d.composite_id,k={};h.removeClass("selected"),b.update_filters_ui();var l={action:"woocommerce_show_component_options",load_page:1,component_id:f,composite_id:j,selected_option:i,filters:k,security:wc_composite_params.show_product_nonce};return g.length>0&&(l.orderby=g.val()),a(this).blur(),b.reload_component_options(l),!1}).on("click",".component_filters a.reset_component_filter",function(c){var e=b.$self,f=b.component_id,g=e.find(".component_ordering select"),h=a(this).closest(".component_filter").find(".component_filter_option.selected");if(0==h.length)return!1;var i=b.get_selected_product_id()>0?b.get_selected_product_id():"",j=d.composite_id,k={};h.removeClass("selected"),b.update_filters_ui(),k=b.get_active_filters();var l={action:"woocommerce_show_component_options",load_page:1,component_id:f,composite_id:j,selected_option:i,filters:k,security:wc_composite_params.show_product_nonce};return g.length>0&&(l.orderby=g.val()),a(this).blur(),b.reload_component_options(l),!1}).on("click",".component_filter_title label",function(b){var d=a(this).closest(".component_filter"),e=d.find(".component_filter_content");return c(d,e),a(this).blur(),!1}).on("click",".component_title",function(e){var f=b.$self,g=d.$composite_form;if(!f.hasClass("toggled")||a(this).hasClass("inactive"))return!1;if(f.hasClass("progressive")&&f.hasClass("active"))return!1;var h=b.$component_inner;if(c(f,h)&&f.hasClass("progressive"))if(f.hasClass("blocked"))g.find(".page_button.next").click();else if(f.hasClass("disabled")){var i=b.get_step();i.block_next_steps(),i.show_step()}return a(this).blur(),!1}).on("change",".component_wrap input.qty",function(b){var c=parseFloat(a(this).attr("min")),e=parseFloat(a(this).attr("max"));c>=0&&parseFloat(a(this).val())<c&&a(this).val(c),e>0&&parseFloat(a(this).val())>e&&a(this).val(e),d.update_composite()})},init_steps:function(){var b=this;"paged"===b.composite_layout?"componentized"===b.composite_layout_variation?(b.$composite_form.find(".multistep.active").removeClass("active"),b.$composite_data.addClass("multistep active"),b.$composite_pagination.find(".pagination_element_review").remove(),b.$composite_summary_widget.hide()):b.$composite_data.prev().hasClass("multistep")?(b.$composite_data.addClass("multistep"),b.$composite_data.hide(),b.$composite_data.hasClass("composite_added_to_cart")&&(b.$composite_form.find(".multistep.active").removeClass("active"),b.$composite_data.addClass("active"))):(b.$composite_data.show(),b.$composite_data.find(".component_title").hide(),b.$composite_pagination.find(".pagination_element_review").remove()):"progressive"===b.composite_layout?(b.$components.show(),b.$composite_data.show(),b.$composite_data.hasClass("composite_added_to_cart")&&(b.$components.removeClass("blocked open").addClass("closed disabled"),b.$components.filter(".toggled").find(".component_inner").hide(),b.$components.filter(".toggled").find(".component_title").removeClass("inactive").addClass("active"),b.$components.filter(".multistep.active").removeClass("active"),b.$components.filter(".multistep.last").addClass("active"))):"single"===b.composite_layout&&(b.$components.show(),b.$composite_data.show()),b.$steps=b.$composite_form.find(".multistep"),b.$composite_form.children(".component, .multistep").each(function(c){b.composite_steps[c]=new j(b,a(this),c)}),b.$composite_navigation.removeAttr("style")},show_step:function(b){var c=this;a.each(c.composite_steps,function(a,c){return c.step_id==b?(c.show_step(),!1):void 0})},show_previous_step:function(){var b=this;a.each(b.composite_steps,function(a,b){return b.is_previous()?(b.show_step(),!1):void 0})},show_next_step:function(){var b=this;a.each(b.composite_steps,function(a,b){return b.is_next()?(b.show_step(),!1):void 0})},get_step:function(b){var c=this,d=!1;return a.each(c.composite_steps,function(a,c){return c.step_id==b?(d=c,!1):void 0}),d},get_current_step:function(){var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_current()?(c=b,!1):void 0}),c},get_previous_step:function(){var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_previous()?(c=b,!1):void 0}),c},get_next_step:function(){var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_next()?(c=b,!1):void 0}),c},get_scenario_data:function(){var a=this,b=a.$composite_data.data("scenario_data");return b},update_active_scenarios:function(b,c){var d,e=this,f=e.composite_layout;"single"!==f?(d=e.get_current_step(),b=d.step_id):d=e.get_step(b);for(var i=d.step_index,j="",k=e.actions_nesting-1;k>0;k--)j+="	";"undefined"==typeof c&&(c=!1),d.is_review()&&(i=1e3);var l=e.get_scenario_data().scenarios,m=e.get_scenarios_by_type(l,"compat_group");0===m.length&&l.push("0");var n=l,o=l,p=[],q=[];if("yes"===wc_composite_params.script_debug&&(c?(j+="	",h("\n"+j+"Scenarios requested by "+d.get_title()+" at "+(new Date).getTime().toString()+"...")):h("\n"+j+"Selections update triggered by "+d.get_title()+" at "+(new Date).getTime().toString()+"..."),h("\n"+j+"Calculating active scenarios...")),a.each(e.composite_components,function(a,c){var d=c.component_id;if("progressive"===f||"paged"===f){if(a>i)return!1;o=n.slice(),q=p.slice()}var k=c.get_selected_product_id(),l=c.get_selected_product_type();if(null!==k&&k>=0){var m=e.get_scenario_data().scenario_data,r=m[d];if(""===k){if(!(0 in r))return!0;k="0"}var s=r[k];"yes"===wc_composite_params.script_debug&&h(j+"Selection #"+k+" of "+c.get_title()+" in scenarios: "+s.toString());var t=g(n,s),u=t.length>0,v=!0;if(u&&"variable"===l){var w=c.$self.find(".single_variation_wrap .variations_button input.variation_id").val();if(w>0){var x=r[w];"yes"===wc_composite_params.script_debug&&h(j+"Variation selection #"+w+" of "+c.get_title()+" in scenarios: "+x.toString()),t=g(t,x),v=t.length>0}}var y=u&&v;y?(p.push(d),n=t,"yes"===wc_composite_params.script_debug&&h(j+"	Active scenarios: "+n.toString())):u?("yes"===wc_composite_params.script_debug&&h(j+"	Variation selection not found in any scenario - breaking out and resetting..."),("single"===f||b==d)&&c.$self.addClass("reset_variation")):("yes"===wc_composite_params.script_debug&&h(j+"	Selection not found in any scenario - breaking out..."),"0"===k||"single"!==f&&b!=d||c.$self.addClass("reset"))}}),"single"===f&&a.each(e.composite_components,function(a,b){var c=b.component_id;if(a==i||b.$self.hasClass("reset")||b.$self.hasClass("reset_variation"))return!0;var d=b.get_selected_product_id(),f=b.get_selected_product_type();if(null!==d&&d>=0){var h=e.get_scenario_data().scenario_data,j=h[c];if(""===d){if(!(0 in j))return!0;d="0"}var k=j[d],l=g(o,k),m=l.length>0,n=!0;if(m&&"variable"===f){var p=b.$self.find(".single_variation_wrap .variations_button input.variation_id").val();if(p>0){var r=j[p];l=g(l,r),n=l.length>0}}var s=m&&n;s&&(q.push(c),o=l)}}),"yes"===wc_composite_params.script_debug&&h(j+"Removing active scenarios where all scenario shaping components are masked..."),"yes"===wc_composite_params.script_debug&&h(j+"	Scenario shaping components: "+p.toString()),c){var r={incl_current:e.get_binding_scenarios(n,p),excl_current:e.get_binding_scenarios(o,q)};return"yes"===wc_composite_params.script_debug&&h("\n"+j+"Final active scenarios incl.: "+r.incl_current.toString()+"\n"+j+"Final active scenarios excl.: "+r.excl_current.toString()),r}e.active_scenarios={incl_current:e.get_binding_scenarios(n,p),excl_current:e.get_binding_scenarios(o,q)},e.$composite_data.data("active_scenarios",e.active_scenarios.incl_current),"yes"===wc_composite_params.script_debug&&h("\n"+j+"Final active scenarios incl.: "+e.active_scenarios.incl_current.toString()+"\n"+j+"Final active scenarios excl.: "+e.active_scenarios.excl_current.toString())},get_binding_scenarios:function(b,c){var d=this,e=d.get_scenario_data().scenario_settings.masked_components,f=[];return c.length>0?b.length>0&&a.each(b,function(b,d){var g=!0;a.each(c,function(b,c){return-1==a.inArray(c.toString(),e[d])?(g=!1,!1):void 0}),g||f.push(d)}):f=b,0===f.length&&b.length>0&&(f=b),f},get_active_scenarios_by_type:function(a){var b=this,c=b.get_scenarios_by_type(b.active_scenarios.incl_current,a),d=b.get_scenarios_by_type(b.active_scenarios.excl_current,a);return{incl_current:c,excl_current:d}},get_scenarios_by_type:function(b,c){var d=this,e=[],f="";if(b.length>0)for(var g in b)f=b[g],a.inArray(c,d.get_scenario_data().scenario_settings.scenario_actions[f])>-1&&e.push(f);return e},get_binding_scenarios_for:function(b,c){var d=this,e=d.get_scenario_data().scenario_settings.masked_components,f=[];return b.length>0&&a.each(b,function(b,d){-1==a.inArray(c.toString(),e[d])&&f.push(d)}),f},update_selections:function(b,c){var d,e=this,f=e.composite_layout,g=e.composite_selection_mode;"single"!==f?(d=e.get_current_step(),b=d.step_id):d=e.get_step(b);for(var i=[],j="",k=e.actions_nesting-1;k>0;k--)j+="	";"undefined"==typeof c&&(c=!1),("progressive"===f||"paged"===f)&&(c=!0),"yes"===wc_composite_params.script_debug&&h("\n"+j+"Updating selections..."),"yes"===wc_composite_params.script_debug&&h("\n"+j+"Clearing incompatible selections..."),a.each(e.composite_components,function(a,c){var d=c.component_id,g=c.$component_options.find("select.component_options_select"),i=c.get_selected_product_id();return"single"!==f&&b!=d?!0:(null===i&&(c.$self.addClass("reset"),"yes"===wc_composite_params.script_debug&&h(j+c.get_title()+" selection was found disabled.")),c.$self.hasClass("reset")&&("yes"===wc_composite_params.script_debug&&h(j+"Resetting "+c.get_title()+"...\n"),c.$self.addClass("resetting"),e.has_scenarios_update_lock=!0,e.has_ui_update_lock=!0,g.val("").change(),e.has_scenarios_update_lock=!1,e.has_ui_update_lock=!1,c.$self.removeClass("reset"),c.$self.removeClass("resetting"),"yes"===wc_composite_params.script_debug&&h(j+"Reset "+c.get_title()+" complete...\n")),void(c.$self.hasClass("reset_variation")&&("yes"===wc_composite_params.script_debug&&h(j+"Resetting variation selections of "+c.get_title()+"...\n"),c.$self.addClass("resetting"),e.has_scenarios_update_lock=!0,e.has_ui_update_lock=!0,c.$component_summary.find(".reset_variations").trigger("click"),e.has_scenarios_update_lock=!1,e.has_ui_update_lock=!1,c.$self.removeClass("reset_variation"),c.$self.removeClass("resetting"),setTimeout(function(){c.$self.find(".reset_variations").css("visibility","hidden")},10),"yes"===wc_composite_params.script_debug&&h(j+"Reset variation selections of "+c.get_title()+" complete...\n"))))});var l=d.step_index;d.is_review()&&(l=1e3);var m=e.get_active_scenarios_by_type("compat_group");a.each(e.composite_components,function(b,k){var n=k.component_id,o=k.$self.find(".component_summary > .content");if("yes"===wc_composite_params.script_debug&&h(j+"Updating selections of "+k.get_title()+"..."),"single"===f&&"thumbnails"===g){var p=e.update_active_scenarios(n,!0);i=e.get_scenarios_by_type(p.excl_current,"compat_group")}else i=c&&l==b?m.excl_current:m.incl_current;"yes"===wc_composite_params.script_debug&&(h(j+"	Reference scenarios: "+i.toString()),h(j+"	Removing any scenarios where the current component is masked...")),i=e.get_binding_scenarios_for(i,n),0===i.length&&i.push("0"),"yes"===wc_composite_params.script_debug&&h(j+"	Active scenarios: "+i.slice().toString());var q=e.get_scenario_data().scenario_data,r=q[n],s=!1;if(0 in r){var t=r[0];for(var u in t){var v=t[u];if(a.inArray(v,i)>-1){s=!0;break}}}else s=!1;s?("yes"===wc_composite_params.script_debug&&h(j+"	Component set as optional."),k.set_optional(!0)):k.set_optional(!1);var w,x=0,y=1;"thumbnails"===e.composite_selection_mode&&(w=k.$component_options.find(".component_option_thumbnails"),y=parseInt(w.data("columns")));var z=k.$component_options.find("select.component_options_select"),A=k.get_selection_id();if(A||(A=z.val()),z.data("select_options")||z.data("select_options",z.find("option:gt(0)").get()),z.find("option:gt(0)").remove(),z.append(z.data("select_options")),z.find("option:gt(0)").removeClass("disabled"),z.find("option:gt(0)").removeAttr("disabled"),k.set_selection_invalid(!1),"thumbnails"===e.composite_selection_mode&&w.find(".no_compat_results").remove(),z.find("option:gt(0)").each(function(){var c,g,l=a(this).val(),m=r[l],n=!1;"yes"===wc_composite_params.script_debug&&(h(j+"	Updating selection #"+l+":"),h(j+"		Selection in scenarios: "+m.toString()));for(var o in m){var p=m[o];if(a.inArray(p,i)>-1){n=!0;break}}if("thumbnails"===e.composite_selection_mode&&(c=k.$component_options.find("#component_option_thumbnail_"+a(this).val()),g=c.closest(".component_option_thumbnail_container")),n?("yes"===wc_composite_params.script_debug&&h(j+"		Selection enabled."),"thumbnails"===e.composite_selection_mode&&c.removeClass("disabled")):("yes"===wc_composite_params.script_debug&&h(j+"		Selection disabled."),A!=l?a(this).addClass("disabled"):(k.set_selection_invalid(!0),a(this).prop("disabled","disabled")),"thumbnails"===e.composite_selection_mode&&c.addClass("disabled")),"thumbnails"===e.composite_selection_mode&&k.append_results()&&("single"===f||b>=d.step_index)){var q="";k.hide_disabled_products()&&!n?q="hidden":(x++,((x-1)%y==0||1==y)&&(q="first"),x%y==0&&(q+=" last")),g.removeClass("first last hidden"),q&&g.addClass(q)}}),k.hide_disabled_products()){if(z.find("option.disabled").remove(),"thumbnails"===e.composite_selection_mode){var B=w.find(".component_option_thumbnail_container"),C=B.not(".hidden");B.length>0&&0==C.length?(w.find(".component_option_thumbnails_container").after('<p class="no_compat_results">'+wc_composite_params.i18n_no_compat_options+"</p>"),k.has_compat_results=!1,k.compat_results_count=0):(k.has_compat_results=!0,k.compat_results_count=C.length)}}else z.find("option.disabled").prop("disabled","disabled");var D=k.get_selected_product_type();if("variable"===D){var E=o.find(".single_variation_wrap .variations_button input.variation_id"),F=E.val(),G=F>0?!1:!0;"yes"===wc_composite_params.script_debug&&h(j+"		Checking variations..."),F>0&&"yes"===wc_composite_params.script_debug&&h(j+"			--- Stored variation is #"+F);var H=k.$component_data.data("product_variations"),I=[];for(var J in H){var K=H[J].variation_id,L=r[K],M=!1;"yes"===wc_composite_params.script_debug&&(h(j+"			Checking variation #"+K+":"),h(j+"			Selection in scenarios: "+L.toString()));for(var N in L){var O=L[N];if(a.inArray(O,i)>-1){M=!0;break}}if("yes"!==wc_composite_params.is_wc_version_gte_2_3||k.hide_disabled_variations())M?(I.push(H[J]),"yes"===wc_composite_params.script_debug&&h(j+"			Variation enabled."),parseInt(K)===parseInt(F)&&(G=!0,"yes"===wc_composite_params.script_debug&&h(j+"			--- Stored variation is valid."))):"yes"===wc_composite_params.script_debug&&h(j+"			Variation disabled.");else{var P=a.extend(!0,{},H[J]),Q=!1;if(M)"yes"===wc_composite_params.script_debug&&h(j+"			Variation enabled."),parseInt(K)===parseInt(F)&&(G=!0,"yes"===wc_composite_params.script_debug&&h(j+"			--- Stored variation is valid."));else{P.variation_is_active=!1;for(var R in P.attributes)if(""===P.attributes[R]){Q=!0;break}"yes"===wc_composite_params.script_debug&&h(j+"			Variation disabled.")}Q||I.push(P)}}o.data("product_variations",I),G||("yes"===wc_composite_params.script_debug&&h(j+"			--- Stored variation was NOT found."),e.has_scenarios_update_lock=!0,e.has_ui_update_lock=!0,o.find(".reset_variations").trigger("click"),e.has_scenarios_update_lock=!1,e.has_ui_update_lock=!1),o.triggerHandler("reload_product_variations")}k.$self.trigger("wc-composite-component-selections-updated",[k,e])}),"yes"===wc_composite_params.script_debug&&h(j+"Finished updating component selections.\n\n")},update_ui:function(a){var b=this,c=b.get_current_step();return"undefined"==typeof a&&(a=!1),b.composite_initialized===!1&&(a=!1),b.has_ui_update_lock===!0?!1:(a&&(b.has_update_nav_delay=!0),b.has_ui_update_lock=!0,void setTimeout(function(){b.update_ui_task(b.has_update_nav_delay),b.has_ui_update_lock=!1,b.has_update_nav_delay=!1,c.get_element().trigger("wc-composite-ui-updated",[b])},10))},update_ui_task:function(){var b=this,c=b.get_current_step(),d=c.get_component(),e=c.get_element();b._validation_messages=[],a.each(b.composite_steps,function(a,b){b.validate()});var f=b.$composite_form,g=b.$composite_navigation,h=b.composite_layout,i=b.composite_layout_variation,j=!1,k=b.get_next_step(),l=b.get_previous_step(),m=g.find(".next"),n=g.find(".prev"),o=!1;delay_nav_update=b.has_update_nav_delay&&"progressive"!==h;var p=function(){if("slide"===wc_composite_params.transition_type&&(o=b.$composite_navigation_movable.clone().addClass("cloned")),m.addClass("invisible inactive"),n.addClass("invisible"),d&&(d.$component_message.addClass("inactive"),k&&"componentized"!==i?(m.html(wc_composite_params.i18n_next_step.replace("%s",k.get_title())),m.removeClass("invisible"),k.get_element().hasClass("toggled")&&k.get_element().find(".component_title").removeClass("inactive")):"paged"===h&&(m.html(wc_composite_params.i18n_final_step),m.removeClass("invisible"))),c.passes_validation()||"componentized"===i&&d)k&&m.removeClass("inactive"),l&&"paged"===h&&l.is_component()?(n.html(wc_composite_params.i18n_previous_step.replace("%s",l.get_title())),n.removeClass("invisible")):n.html(""),j=!0;else{if(k&&k.get_element().hasClass("toggled")&&k.get_element().find(".component_title").addClass("inactive"),l&&l.is_component()){var g=l.get_component().get_selected_product_id();(g>0||"0"===g||""===g&&l.get_component().is_optional())&&"paged"===h&&(n.html(wc_composite_params.i18n_previous_step.replace("%s",l.get_title())),n.removeClass("invisible"))}if(d&&(!e.hasClass("last")||!e.hasClass("progressive"))){var p=a("<ul/>"),q=c.get_validation_messages();q.length>0&&a.each(q,function(b,c){p.append(a("<li/>").html(c))}),d.$component_message_content.html(p.html()),d.$component_message.removeClass("inactive")}}if("progressive"===h){var r=f.find(".composite_navigation.progressive"),s=e.find(".composite_navigation.progressive").length>0,t=f.find(".component.next");if(s){d&&(d.$component_message.hasClass("inactive")?d.$component_message.slideUp(200):d.$component_message.slideDown(200));var u=!1;e.hasClass("last")||j&&!t.hasClass("toggled")&&(u=!0),u?r.slideDown(200):r.slideUp(200)}else r.css({visibility:"hidden"}),r.slideUp(200),setTimeout(function(){r.appendTo(e.find(".component_inner")).css({visibility:"visible"}),setTimeout(function(){d&&!d.$component_message.hasClass("inactive")&&d.$component_message.slideDown(200);var a=!1;e.hasClass("last")||j&&!t.hasClass("toggled")&&(a=!0),a&&r.slideDown({duration:200,queue:!1})},200)},200)}else if("paged"===h&&"thumbnails"===b.composite_selection_mode&&e.hasClass("options-style-thumbnails")){var v=0;if(d&&(d.$component_selections.hasClass("blocked_content")&&!d.$component_message.hasClass("inactive")&&(v=600),d.$component_content.hasClass("relocating")&&(d.$component_message.hide(),v=600),delay_nav_update&&(v="slide"===wc_composite_params.transition_type?b.current_transition_delay+100:200),setTimeout(function(){d.$component_message.hasClass("inactive")?d.$component_message.slideUp(200):d.$component_message.slideDown(200)},v)),d)if(d.get_selection_id()>0){var w=d.$component_content.find(".composite_navigation").not(".cloned").length>0,x=!1;if(d.append_results()&&!d.$component_pagination.find(".component_options_load_more").is(":visible")){var y=b.$composite_navigation_bottom.offset().top-d.$component_content.offset().top-d.$component_content.outerHeight(!0);100>y&&(x=!0)}w||x?w&&x?b.$composite_navigation_movable.addClass("hidden"):w&&b.$composite_navigation_movable.removeClass("hidden"):("slide"===wc_composite_params.transition_type&&b.$composite_navigation_movable.after(o),b.$composite_navigation_movable.appendTo(d.$component_summary).removeClass("hidden"))}else"slide"===wc_composite_params.transition_type&&(b.$composite_navigation_movable.addClass("hidden"),b.$composite_navigation_movable.after(o))}else{var z=0;"paged"===h&&delay_nav_update&&(z="slide"===wc_composite_params.transition_type?b.current_transition_delay+100:200),d&&setTimeout(function(){d.$component_message.hasClass("inactive")?d.$component_message.slideUp(200):d.$component_message.slideDown(200)},z)}};"single"!==h&&(delay_nav_update?c.on_step_active.push(p):p());var q=b.$composite_pagination,r=b.$composite_summary;if(0==q.length&&0==r.length)return!1;var s=!1;a.each(b.composite_steps,function(a,d){if(a>0){var e=b.composite_steps[a-1];e.is_review()||"single"===h||(!1===e.passes_validation()&&("componentized"!==i||"componentized"===i&&"yes"===b.composite_sequential_comp_progress)?s=!0:e.is_blocked()?s=!0:d.view_elements.$pagination_element_link.hasClass("inactive")&&b.get_next_step().step_index!=a&&c.step_index<b.last_active_step_index&&a>b.last_active_step_index&&(s=!0))}q.length>0&&(d.is_current()?(d.view_elements.$pagination_element_link.addClass("inactive"),d.view_elements.$pagination_element.addClass("pagination_element_current")):s?(d.view_elements.$pagination_element_link.addClass("inactive"),d.view_elements.$pagination_element.removeClass("pagination_element_current")):(d.view_elements.$pagination_element_link.removeClass("inactive"),d.view_elements.$pagination_element.removeClass("pagination_element_current"))),r.length>0&&(d.is_current()?(d.view_elements.$summary_element_link.removeClass("disabled"),"single"!==h&&d.view_elements.$summary_element_link.addClass("selected"),!1===b.get_step("review")&&d.view_elements.$summary_element.find(".summary_element_selection_prompt").slideUp(200)):(d.view_elements.$summary_element.find(".summary_element_selection_prompt").slideDown(200),s?(d.view_elements.$summary_element_link.removeClass("selected"),d.view_elements.$summary_element_link.addClass("disabled")):(d.view_elements.$summary_element_link.removeClass("disabled"),d.view_elements.$summary_element_link.removeClass("selected"))))}),b.composite_summary_widget.update_links()},update_summary:function(){var c=this,d=c.$composite_summary,g=c.$composite_data.data("price_data");return 0==d.length?!1:(a.each(c.composite_components,function(h,i){var j=i.component_id,k=i.$self,l=j,m=i.get_step().view_elements.$summary_element_wrapper,n=i.get_step().view_elements.$summary_element_inner,o=i.$component_options.find("#component_options_"+j),p=i.get_selected_product_type(),q=i.get_selected_product_id(),r=parseInt(k.find(".component_wrap input.qty").val()),s="",t="",u="",v="",w="",x="",y=0;if(d.is(":visible")&&(y=n.outerHeight(!0),m.css("height",y)),"none"===p)i.is_optional()&&(s='<span class="content_product_title none">'+o.find("option.none").data("title")+"</span>");else if("variable"===p)q>0&&(r>0||0===r)&&(v=o.find("option:selected").data("title"),w="<strong>"+wc_composite_params.i18n_qty_string.replace("%s",r)+"</strong>",v=wc_composite_params.i18n_title_string.replace("%t",v).replace("%q",w).replace("%p",""),x=b(k.find(".variations")),s=x?wc_composite_params.i18n_selected_product_string.replace("%t",v).replace("%m",'<span class="content_product_meta">'+x+"</span>"):v,s='<span class="content_product_title">'+s+"</span>",u=k.find(".composited_product_image img").attr("src"),"undefined"==typeof u&&(u=o.find("option:selected").data("image_src")));else if("bundle"===p){if(q>0&&(r>0||0===r)){var z="",A=0,B=!1;B=wc_pb_bundle_scripts[q],a.each(B.bundled_items,function(a,b){b.$self.hasClass("bundled_item_hidden")||b.$bundled_item_cart.data("quantity")>0&&A++}),!1===B||0==A?s=wc_composite_params.i18n_none:(s='<span class="content_product_title content_bundle_title">'+o.find("option:selected").data("title")+"</span>",a.each(B.bundled_items,function(a,c){if(c.$self.hasClass("bundled_item_hidden"))return!0;if(c.$bundled_item_cart.data("quantity")>0){var d=c.$bundled_item_cart.data("title"),e="<strong>"+wc_composite_params.i18n_qty_string.replace("%s",parseInt(c.$bundled_item_cart.data("quantity")*r))+"</strong>",f=b(c.$bundled_item_cart.find(".variations"));d=wc_composite_params.i18n_title_string.replace("%t",d).replace("%q",e).replace("%p",""),f&&(d=wc_composite_params.i18n_selected_product_string.replace("%t",d).replace("%m",'<span class="content_product_meta">'+f+"</span>")),z=z+'<span class="content_bundled_product_title content_product_title">'+d+"</span>"}}),s=wc_composite_params.i18n_selected_product_string.replace("%t",s).replace("%m",z)),u=o.find("option:selected").data("image_src")}}else q>0&&(v=o.find("option:selected").data("title"),w=isNaN(r)?"":"<strong>"+wc_composite_params.i18n_qty_string.replace("%s",r)+"</strong>",s=wc_composite_params.i18n_title_string.replace("%t",v).replace("%q",w).replace("%p",""),s='<span class="content_product_title">'+s+"</span>",u=o.find("option:selected").data("image_src"));if(t=s&&i.is_configured()?k.hasClass("static")?'<a href="">'+wc_composite_params.i18n_summary_static_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_configured_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_empty_component+"</a>",s?i.get_step().view_elements.$summary_element_title.html('<span class="summary_element_content">'+s+'</span><span class="summary_element_content summary_element_selection_prompt">'+t+"</span>"):i.get_step().view_elements.$summary_element_title.html('<span class="summary_element_content summary_element_selection_prompt">'+t+"</span>"),i.is_configured()?m.addClass("configured"):m.removeClass("configured"),k.hasClass("active")&&i.get_step().view_elements.$summary_element_title.find(".summary_element_selection_prompt").hide(),c.update_summary_element_image(i,u),"yes"===g.per_product_pricing&&q>0&&r>0&&i.get_step().passes_validation()){var C=(parseFloat(g.prices[l])+parseFloat(g.addons_prices[l]))*r,D=(parseFloat(g.regular_prices[l])+parseFloat(g.addons_prices[l]))*r,E=e(f(C)),F=e(f(D));D>C?i.get_step().view_elements.$summary_element_price.html('<span class="price summary_element_content"><del>'+F+"</del> <ins>"+E+"</ins></span>"):i.get_step().view_elements.$summary_element_price.html('<span class="price summary_element_content">'+E+"</span>")}else i.get_step().view_elements.$summary_element_price.html("");if(k.trigger("wc-composite-component-update-summary-content",[i,c]),d.is(":visible")){var G=n.outerHeight(!0),H=!1;Math.abs(G-y)>1?H=!0:m.css("height","auto"),H&&m.animate({height:G},{duration:200,queue:!1,always:function(){m.css({height:"auto"})}})}}),void c.composite_summary_widget.update_markup())},update_summary_element_image:function(a,b){var c=a.get_step().view_elements.$summary_element_image.find("img");if(0==c.length||c.hasClass("norefresh"))return!1;var d=c.attr("data-o_src");
b?("undefined"==typeof d&&(d=c.attr("src")?c.attr("src"):"",c.attr("data-o_src",d)),c.attr("src",b)):"undefined"!=typeof d&&c.attr("src",d)},update_composite:function(){var a=this;return a.composite_initialized!==!0?!1:a.has_update_lock===!0?!1:(a.has_update_lock=!0,void setTimeout(function(){a.update_composite_task(),a.has_update_lock=!1},50))},update_composite_task:function(){var b=this,c=b.$composite_data,d=!0,g={},h=[],j=c.data("price_data");if(a.each(b.composite_components,function(b,c){var e=c.component_id,f=c.$self,h=e,i=c.get_selected_product_type(),k=f.find("#component_options_"+h).val(),l=f.find(".component_wrap input.qty").val(),m=f.find(".component_wrap input.variation_id").val();c.set_configured(!1),j.prices[h]=parseFloat(c.$component_data.data("price")),j.regular_prices[h]=parseFloat(c.$component_data.data("regular_price")),j.addons_prices[h]=0,f.find(".addon").each(function(){if("bundle"===i&&!a(this).closest(".cart").hasClass("bundle_data"))return!0;var b=0;a(this).is(".addon-custom-price")?b=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),b=a(this).data("price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(b=a(this).data("price")):a(this).is(".addon-select")?a(this).val()&&(b=a(this).find("option:selected").data("price")):a(this).val()&&(b=a(this).data("price")),b||(b=0),j.addons_prices[h]=parseFloat(j.addons_prices[h])+parseFloat(b)}),"undefined"==typeof i||""==i?d=!1:k>0||c.is_optional()?"none"!==i&&""===l?d=!1:"variable"!==i||"undefined"!=typeof m&&0!=c.$component_data.data("component_set")?"variable"!==i&&"simple"!==i&&"none"!==i&&0==c.$component_data.data("component_set")?d=!1:(c.set_configured(!0),l>0?g[h]=parseInt(l):g[h]=0):d=!1:d=!1}),b.update_summary(),d){if("no"===j.per_product_pricing&&""===j.base_price)return b.disable_add_to_cart(wc_composite_params.i18n_unavailable_text),!1;if(j.total=parseFloat(j.base_price),j.regular_total=parseFloat(j.base_regular_price),"yes"===j.per_product_pricing)for(var k in j.prices)j.total+=(parseFloat(j.prices[k])+parseFloat(j.addons_prices[k]))*g[k],j.regular_total+=(parseFloat(j.regular_prices[k])+parseFloat(j.addons_prices[k]))*g[k];else for(var l in j.addons_prices)j.total+=parseFloat(j.addons_prices[l])*g[l],j.regular_total+=parseFloat(j.addons_prices[l])*g[l];var m=c.find("#product-addons-total");if(m.length>0&&(m.data("price",j.total),c.trigger("woocommerce-product-addons-update")),0==j.total&&"yes"===j.show_free_string)b.$composite_price.html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+wc_composite_params.i18n_free+"</p>");else{var n=e(f(j.total)),o=e(f(j.regular_total));j.regular_total>j.total?b.$composite_price.html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span><del>"+o+"</del> <ins>"+n+"</ins></p>"):b.$composite_price.html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+n+"</p>")}var p=!1;a.each(b.composite_components,function(a,b){!1===b.is_in_stock()&&g[b.component_id]>0&&(p=!0)}),"new"!==b.composite_button_behaviour?c.find(".composite_wrap").slideDown(200):(b.$composite_price.removeClass("inactive").slideDown(200),b.$composite_message.addClass("inactive").slideUp(200),p?b.$composite_add_to_cart_button.prop("disabled",!0).addClass("disabled"):b.$composite_add_to_cart_button.prop("disabled",!1).removeClass("disabled")),c.find(".composite_wrap").trigger("wc-composite-show-add-to-cart",[b])}else b.disable_add_to_cart();a.each(b.composite_components,function(b,c){!1===c.is_in_stock()&&g[c.component_id]>0&&h.push(wc_composite_params.i18n_insufficient_item_stock.replace("%s",a("#component_options_"+c.component_id+" option:selected").data("title")).replace("%v",c.get_title()))});var q=!1;if(h.length>0){var r='<p class="stock out-of-stock">'+wc_composite_params.i18n_insufficient_stock+"</p>",s=i(h);q=a(r.replace("%s",s))}var t=c.find(".composite_wrap p.stock");q?t.length>0?t.hasClass("inactive")?(t.replaceWith(q.hide()),q.slideDown(200)):t.replaceWith(q):(b.$composite_button.before(q.hide()),q.slideDown(200)):b.$composite_stock_status?t.replaceWith(b.$composite_stock_status):t.addClass("inactive").slideUp(200),b.composite_summary_widget.update_price(),b.composite_summary_widget.update_error()},disable_add_to_cart:function(b){var c=this,d=c.$composite_data,e=a("<ul/>");"new"===c.composite_button_behaviour?("undefined"==typeof b?c.passes_validation()||(e.append(a("<li/>").addClass("validation_msg").html(wc_composite_params.i18n_validation_issues)),c.passes_validation()||a.each(c.get_validation_messages(),function(b,c){e.append(a("<li/>").addClass("indented_validation_msg validation_msg").html(c))})):e.append(a("<li/>").html(b.toString())),c.$composite_price.addClass("inactive").slideUp(200),c.$composite_message_content.html(e.html()),c.$composite_message.removeClass("inactive").slideDown(200),c.$composite_add_to_cart_button.prop("disabled",!0).addClass("disabled")):(c.$composite_price.html('<p class="price"></p>'),d.find(".composite_wrap").slideUp(200)),d.find(".composite_wrap").trigger("wc-composite-hide-add-to-cart",[c])},add_validation_message:function(b,c){var d=this,e=!1;this._validation_messages.length>0&&a.each(this._validation_messages,function(a,f){if(f.content===c){var g=f.sources,h=f.content;return g.push(b),d._validation_messages[a]={sources:g,content:h},e=!0,!1}}),e||this._validation_messages.push({sources:[b],content:c.toString()})},get_validation_messages:function(){var b=[];return this._validation_messages.length>0&&a.each(this._validation_messages,function(a,c){var d=i(c.sources);b.push(wc_composite_params.i18n_validation_issues_for.replace("%c",d).replace("%e",c.content))}),b},passes_validation:function(){return this._validation_messages.length>0?!1:!0},init_widget:function(){var b=this;b.composite_summary_widget={$self:b.$composite_summary_widget,$elements:b.$composite_summary_widget.find(".widget_composite_summary_elements"),$price:b.$composite_summary_widget.find(".widget_composite_summary_price"),$error:b.$composite_summary_widget.find(".widget_composite_summary_error"),bind_event_handlers:function(){b.$composite_summary_widget.on("click",".summary_element_link",function(c){var d=a(this).closest(".composite_summary"),e=d.find(".widget_composite_summary_content").data("container_id"),f=a("#composite_data_"+e).closest(".composite_form");if(a(this).hasClass("disabled"))return!1;if(b.has_transition_lock)return!1;var g=a(this).closest(".summary_element").data("item_id");if("undefined"==typeof g){var h=d.find(".summary_element").index(a(this).closest(".summary_element"));g=f.find(".multistep.component:eq("+h+")").data("item_id")}var i=b.get_step(g);return i===!1?!1:(i.get_element().hasClass("progressive")&&i.block_next_steps(),i.is_current()&&"single"!==b.composite_layout||i.show_step(),!1)}).on("click","a.summary_element_tap",function(b){return a(this).closest(".summary_element_link").trigger("click"),!1})},update_markup:function(){var a=this;if(a.$self.length>0){var c=b.$composite_summary.find(".summary_elements").clone();c.find(".summary_element_wrapper").css({height:"auto"}),c.find(".summary_element").css({width:"100%"}),c.find(".summary_element_selection_prompt").remove(),a.$elements.html(c)}},update_links:function(){var c=this;b.$composite_summary.length>0&&c.$self.length>0&&a.each(b.composite_steps,function(a,b){var d=c.$self.find(".summary_element_"+b.step_id),e=d.find(".summary_element_link");e.removeClass("disabled selected"),b.view_elements.$summary_element_link.hasClass("disabled")&&e.addClass("disabled"),b.view_elements.$summary_element_link.hasClass("selected")&&e.addClass("selected")})},update_price:function(){var a=this;if(a.$self.length>0){var c=b.$composite_price.clone(),d="";c.hasClass("inactive")||(d=c.html()),a.$price.html(d)}},update_error:function(){var a=this;if(a.$self.length>0)if(b.$composite_message.hasClass("inactive"))a.$error.html("");else{var c=b.$composite_message_content.clone().removeClass("woocommerce-error").addClass("woocommerce-info");a.$error.html(c)}}},b.composite_summary_widget.$self.removeClass("cp-no-js"),b.composite_summary_widget.bind_event_handlers()},on_resize_handler:function(){var b=this,c=b.$composite_form.width();c<=wc_composite_params.small_width_threshold?b.$composite_form.addClass("small_width"):b.$composite_form.removeClass("small_width"),c>wc_composite_params.full_width_threshold?b.$composite_form.addClass("full_width"):b.$composite_form.removeClass("full_width"),wc_composite_params.legacy_width_threshold&&(c<=wc_composite_params.legacy_width_threshold?b.$composite_form.addClass("legacy_width"):b.$composite_form.removeClass("legacy_width")),a.each(b.composite_components,function(a,b){if(b.$component_content.hasClass("relocated")){var c=b.get_content_relocation_params();if(c.relocate){var d=b.$component_options.find(".component_option_content_container"),e=c.reference;e.after(d)}}})}},wc_cp_composite_scripts[m].init()},a.fn.is_in_viewport=function(b,c,d){var e=a(window);if(!(this.length<1)){var f=this.length>1?this.eq(0):this,g=f.get(0),h=e.width(),i=e.height(),j=c===!0?g.offsetWidth*g.offsetHeight:!0;if(d=d?d:"vertical","function"==typeof g.getBoundingClientRect){var k=g.getBoundingClientRect(),l=k.top>=0&&k.top<i,m=k.bottom>0&&k.bottom<=i,n=k.left>=0&&k.left<h,o=k.right>0&&k.right<=h,p=b?l||m:l&&m,q=b?n||o:n&&o;if("both"===d)return j&&p&&q;if("vertical"===d)return j&&p;if("horizontal"===d)return j&&q}else{var r=e.scrollTop(),s=r+i,t=e.scrollLeft(),u=t+h,v=f.offset(),w=v.top,x=w+f.height(),y=v.left,z=y+f.width(),A=b===!0?x:w,B=b===!0?w:x,C=b===!0?z:y,D=b===!0?y:z;if("both"===d)return!!j&&s>=B&&A>=r&&u>=D&&C>=t;if("vertical"===d)return!!j&&s>=B&&A>=r;if("horizontal"===d)return!!j&&u>=D&&C>=t}}},a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})});